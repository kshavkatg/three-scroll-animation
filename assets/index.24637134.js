import{G as H,S as j,C as b,a as B,s as x,M as z,D as I,b as S,c as O,d as G,e as k,P as X,W as q,f as N,R as Q,L as R,g as _,E as Y,h as K,i as Z,j as $,O as J,k as V,H as ee,l as T,m as te,n as se,o as C,p as ae,q as W,U as ie,r as ne,F as oe,t as re,u as r,v as le,w as de,x as ce,y as ue,z as he,A as fe,B as pe}from"./vendor.71aa6e04.js";const ge=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const w of a.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&c(w)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};ge();class me extends ae{constructor(e=64){super();W===void 0&&console.error("THREE.GlitchPass relies on DigitalGlitch");const n=W;this.uniforms=ie.clone(n.uniforms),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new ne({uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),this.fsQuad=new oe(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,n,c){e.capabilities.isWebGL2===!1&&(this.uniforms.tDisp.value.format=re),this.uniforms.tDiffuse.value=c.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||this.goWild==!0?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=r.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=r.randFloat(-1,1),this.uniforms.seed_y.value=r.randFloat(-1,1),this.uniforms.distortion_x.value=r.randFloat(0,1),this.uniforms.distortion_y.value=r.randFloat(0,1),this.curF=0,this.generateTrigger(),this.curF++):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=r.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=r.randFloat(0,1),this.uniforms.distortion_y.value=r.randFloat(0,1),this.uniforms.seed_x.value=r.randFloat(-.3,.3),this.uniforms.seed_y.value=r.randFloat(-.3,.3),this.curF++):this.goWild==!1&&(this.curF+=.5,this.uniforms.byp.value=5),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=r.randInt(120,240)}generateHeightmap(e){const n=new Float32Array(e*e),c=e*e;for(let a=0;a<c;a++){const w=r.randFloat(0,1);n[a]=w}const s=new le(n,e,e,de,ce);return s.needsUpdate=!0,s}}window.onbeforeunload=function(){window.scrollTo(0,0)};const p={};p.x=0;p.y=0;window.addEventListener("mousemove",t=>{p.x=t.clientX/o.width-.5,p.y=t.clientY/o.height-.5});new H;const l={};l.topColor="#0000ff";l.bottomColor="#ff0000";l.directLightColor="#ff0000";l.sceneBackground="#a20000";l.modelX=0;l.modelY=1.2;l.modelZ=1;l.cameraNear=.01;l.sphereOpacity=0;const u=new j;u.background=new b(l.sceneBackground);const o={width:window.innerWidth,height:window.innerHeight};window.addEventListener("resize",()=>{o.width=window.innerWidth,o.height=window.innerHeight,d.aspect=o.width/o.height,d.updateProjectionMatrix(),i.setSize(o.width,o.height)});const we=new B,A=we.load(["/ev/posx.jpg","/ev/negx.jpg","/ev/posy.jpg","/ev/negy.jpg","/ev/posz.jpg","/ev/negz.jpg"]);A.encoding=x;u.environment=A;const ve=()=>{u.traverse(t=>{t instanceof S&&t.material instanceof ue&&(t.material.needsUpdate=!0,t.frustumCulled=!1,t.castShadow=!0,t.receiveShadow=!0,t.material.needsUpdate=!0,t.material.envMapIntensity=3)})},E=new z({color:new b("#000000"),transparent:!0,opacity:l.sphereOpacity,side:I}),ye=new S(new O(100,32,32),E);u.add(ye);let v;const L=new G,h=new G,Me=new k;Me.load("./model.glb",t=>{v=t.scene,v.scale.set(2,2,2),h.add(v),h.position.y=-2.6,L.add(h),u.add(L),ve()});const d=new X(65,o.width/o.height,.01,1e3);d.position.x=0;d.position.y=0;d.position.z=1;const i=new q({canvas:document.querySelector("#bg"),antialias:!0});i.shadowMap.enabled=!0;i.shadowMap.type=N;i.physicallyCorrectLights=!0;i.outputEncoding=x;i.toneMapping=Q;i.toneMappingExposure=1.5;let P=null;i.getPixelRatio()===1&&i.capabilities.isWebGL2?(P=he,console.log("Using WebGLMultisampleRenderTarget")):(P=fe,console.log("Using WebGLRenderTarget"));const be=new P(800,600,{minFilter:R,magFilter:R,format:_,encoding:x}),f=new Y(i,be);f.setPixelRatio(Math.min(window.devicePixelRatio,2));f.setSize(o.width,o.height);const xe=new K(u,d);f.addPass(xe);const F=new me;F.goWild=!1;F.enabled=!0;f.addPass(F);const M=new Z($);M.uniforms.amount.value=.003;M.uniforms.angle.value=3.5;M.enabled=!0;f.addPass(M);if(i.getPixelRatio()===1&&!i.capabilities.isWebGL2){const t=new SMAAPass;f.addPass(t),console.log("Using SMAA")}i.setSize(o.width,o.height);i.setPixelRatio(Math.min(window.devicePixelRatio,2));const U=new J(d,document.querySelector("#bg"));U.enableDamping=!0;const y=new V(16711680,50,10,3);y.position.set(0,-3,.5);y.castShadow=!0;y.shadow.normalBias=.05;const Le=new ee(16777215,255,3);u.add(Le);const g=new T("#0000ff",15,10);g.position.set(-1,-2,2);const m=new T("#ff0000",15,10);m.position.set(1,-2,3);h.add(m,g,y);new te(y,1,new b("#0000ff"));new se(100,100);new C(g,.2);new C(m,.2);function Pe(){let e=document.body.getBoundingClientRect().top*-5e-4;e<1.4&&(h.rotation.y=-e,h.position.y=e*.5-2.6),h.position.z=-e*1.2,E.opacity=e*.5,e>.5&&e<2&&(L.rotation.z=-(e-.5)),e>2&&e<2.5&&(h.rotation.y=+(e-2-1.4))}document.body.onscroll=Pe;const Fe=new pe,D=()=>{const t=Fe.getElapsedTime();v&&(v.position.y+=Math.sin(t)*.001);const e=t*.5;g.position.x=Math.cos(e)*5,g.position.z=Math.abs(Math.sin(e))*4-2,g.position.y=Math.sin(t*2)-2;const n=t*.32;m.position.x=Math.cos(n)*5,m.position.z=Math.abs(Math.sin(n)*4),m.position.y=Math.sin(n*3)+Math.sin(t*2.5);const c=p.x*.05,s=-p.y*.05;d.position.x=c,d.position.y=s,U.update(),i.render(u,d),f.render(),window.requestAnimationFrame(D)};D();
